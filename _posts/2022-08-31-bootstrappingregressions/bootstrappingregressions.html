<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  { color: #00769e; background-color: #f1f3f5; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span { color: #00769e; } /* Normal */
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #657422; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #00769e; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #00769e; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #00769e; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #5e5e5e; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>


  <!--radix_placeholder_meta_tags-->
  <title>4 Reasons Non-Parametric Bootstrapped Regression (with tidymodels) is Better thаn Ordinary Regression</title>

  <meta property="description" itemprop="description" content="If the assumptions of parametric models can be satisfied, parametric models are the way to go. However, there are often many assumptions and to satisfy them all is rarely possible. Data transformation or using non-parametric methods are two solutions for that. In this post we&#39;ll learn the Non-Parametric Bootstrapped Regression as an alternative for the Ordinary Linear Regression in case when assumptions are violated."/>


  <!--  https://schema.org/Article -->
  <meta property="article:published" itemprop="datePublished" content="2022-10-07"/>
  <meta property="article:created" itemprop="dateCreated" content="2022-10-07"/>
  <meta name="article:author" content="Yury Zablotski"/>

  <!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
  <meta property="og:title" content="4 Reasons Non-Parametric Bootstrapped Regression (with tidymodels) is Better thаn Ordinary Regression"/>
  <meta property="og:type" content="article"/>
  <meta property="og:description" content="If the assumptions of parametric models can be satisfied, parametric models are the way to go. However, there are often many assumptions and to satisfy them all is rarely possible. Data transformation or using non-parametric methods are two solutions for that. In this post we&#39;ll learn the Non-Parametric Bootstrapped Regression as an alternative for the Ordinary Linear Regression in case when assumptions are violated."/>
  <meta property="og:locale" content="en_US"/>

  <!--  https://dev.twitter.com/cards/types/summary -->
  <meta property="twitter:card" content="summary"/>
  <meta property="twitter:title" content="4 Reasons Non-Parametric Bootstrapped Regression (with tidymodels) is Better thаn Ordinary Regression"/>
  <meta property="twitter:description" content="If the assumptions of parametric models can be satisfied, parametric models are the way to go. However, there are often many assumptions and to satisfy them all is rarely possible. Data transformation or using non-parametric methods are two solutions for that. In this post we&#39;ll learn the Non-Parametric Bootstrapped Regression as an alternative for the Ordinary Linear Regression in case when assumptions are violated."/>

  <!--/radix_placeholder_meta_tags-->
  
  <!--radix_placeholder_rmarkdown_metadata-->

  <script type="text/json" id="radix-rmarkdown-metadata">
  {"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","author","date","categories","preview","output","bibliography","biblio-style","link-citations","linkcolor"]}},"value":[{"type":"character","attributes":{},"value":["4 Reasons Non-Parametric Bootstrapped Regression (with tidymodels) is Better thаn Ordinary Regression"]},{"type":"character","attributes":{},"value":["If the assumptions of parametric models can be satisfied, parametric models are the way to go. However, there are often many assumptions and to satisfy them all is rarely possible. Data transformation or using non-parametric methods are two solutions for that. In this post we'll learn the Non-Parametric Bootstrapped Regression as an alternative for the Ordinary Linear Regression in case when assumptions are violated.\n"]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","url"]}},"value":[{"type":"character","attributes":{},"value":["Yury Zablotski"]},{"type":"character","attributes":{},"value":["https://yuzar-blog.netlify.app/"]}]}]},{"type":"character","attributes":{},"value":["October 07, 2022"]},{"type":"character","attributes":{},"value":["videos","statistics","visualization","models"]},{"type":"character","attributes":{},"value":["thumbnail_bootstrapped_regression.png"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained","toc","toc_float","toc_depth","code_download"]}},"value":[{"type":"logical","attributes":{},"value":[false]},{"type":"logical","attributes":{},"value":[true]},{"type":"logical","attributes":{},"value":[true]},{"type":"integer","attributes":{},"value":[6]},{"type":"logical","attributes":{},"value":[true]}]}]},{"type":"character","attributes":{},"value":["/Users/zablotski/Documents/library.bib"]},{"type":"character","attributes":{},"value":["apalike"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["blue"]}]}
  </script>
  <!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["bootstrappingregressions_files/anchor-4.2.2/anchor.min.js","bootstrappingregressions_files/bowser-1.9.3/bowser.min.js","bootstrappingregressions_files/distill-2.2.21/template.v2.js","bootstrappingregressions_files/figure-html5/unnamed-chunk-1-1 2.png","bootstrappingregressions_files/figure-html5/unnamed-chunk-1-1.png","bootstrappingregressions_files/figure-html5/unnamed-chunk-1-2.png","bootstrappingregressions_files/figure-html5/unnamed-chunk-1-3.png","bootstrappingregressions_files/figure-html5/unnamed-chunk-10-1 2.png","bootstrappingregressions_files/figure-html5/unnamed-chunk-10-1.png","bootstrappingregressions_files/figure-html5/unnamed-chunk-11-1.png","bootstrappingregressions_files/figure-html5/unnamed-chunk-12-1.png","bootstrappingregressions_files/figure-html5/unnamed-chunk-13-1 2.png","bootstrappingregressions_files/figure-html5/unnamed-chunk-13-1.png","bootstrappingregressions_files/figure-html5/unnamed-chunk-14-1 2.png","bootstrappingregressions_files/figure-html5/unnamed-chunk-14-1.png","bootstrappingregressions_files/figure-html5/unnamed-chunk-14-2.png","bootstrappingregressions_files/figure-html5/unnamed-chunk-14-3 2.png","bootstrappingregressions_files/figure-html5/unnamed-chunk-14-3.png","bootstrappingregressions_files/figure-html5/unnamed-chunk-15-1 2.png","bootstrappingregressions_files/figure-html5/unnamed-chunk-15-1.png","bootstrappingregressions_files/figure-html5/unnamed-chunk-16-1 2.png","bootstrappingregressions_files/figure-html5/unnamed-chunk-16-1.png","bootstrappingregressions_files/figure-html5/unnamed-chunk-17-1.png","bootstrappingregressions_files/figure-html5/unnamed-chunk-18-1.png","bootstrappingregressions_files/figure-html5/unnamed-chunk-2-1 2.png","bootstrappingregressions_files/figure-html5/unnamed-chunk-2-1.png","bootstrappingregressions_files/figure-html5/unnamed-chunk-2-2.png","bootstrappingregressions_files/figure-html5/unnamed-chunk-2-3.png","bootstrappingregressions_files/figure-html5/unnamed-chunk-3-1 2.png","bootstrappingregressions_files/figure-html5/unnamed-chunk-3-1.png","bootstrappingregressions_files/figure-html5/unnamed-chunk-3-2.png","bootstrappingregressions_files/figure-html5/unnamed-chunk-3-3.png","bootstrappingregressions_files/figure-html5/unnamed-chunk-4-1 2.png","bootstrappingregressions_files/figure-html5/unnamed-chunk-4-1.png","bootstrappingregressions_files/figure-html5/unnamed-chunk-4-2.png","bootstrappingregressions_files/figure-html5/unnamed-chunk-5-1.png","bootstrappingregressions_files/figure-html5/unnamed-chunk-8-1 2.png","bootstrappingregressions_files/figure-html5/unnamed-chunk-8-1.png","bootstrappingregressions_files/figure-html5/unnamed-chunk-9-1 2.png","bootstrappingregressions_files/figure-html5/unnamed-chunk-9-1.png","bootstrappingregressions_files/header-attrs-2.14/header-attrs.js","bootstrappingregressions_files/header-attrs-2.16/header-attrs.js","bootstrappingregressions_files/jquery-3.6.0/jquery-3.6.0.js","bootstrappingregressions_files/jquery-3.6.0/jquery-3.6.0.min.js","bootstrappingregressions_files/jquery-3.6.0/jquery-3.6.0.min.map","bootstrappingregressions_files/popper-2.6.0/popper.min.js","bootstrappingregressions_files/tippy-6.2.7/tippy-bundle.umd.min.js","bootstrappingregressions_files/tippy-6.2.7/tippy-light-border.css","bootstrappingregressions_files/tippy-6.2.7/tippy.css","bootstrappingregressions_files/tippy-6.2.7/tippy.umd.min.js","bootstrappingregressions_files/vembedr-0.1.5/css/vembedr.css","bootstrappingregressions_files/webcomponents-2.0.0/webcomponents.js","num_example.jpeg","rob_example.jpeg","thumbnail_bootstrapped_regression.png"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
  <!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

  <style type="text/css">

  body {
    background-color: white;
  }

  .pandoc-table {
    width: 100%;
  }

  .pandoc-table>caption {
    margin-bottom: 10px;
  }

  .pandoc-table th:not([align]) {
    text-align: left;
  }

  .pagedtable-footer {
    font-size: 15px;
  }

  d-byline .byline {
    grid-template-columns: 2fr 2fr;
  }

  d-byline .byline h3 {
    margin-block-start: 1.5em;
  }

  d-byline .byline .authors-affiliations h3 {
    margin-block-start: 0.5em;
  }

  .authors-affiliations .orcid-id {
    width: 16px;
    height:16px;
    margin-left: 4px;
    margin-right: 4px;
    vertical-align: middle;
    padding-bottom: 2px;
  }

  d-title .dt-tags {
    margin-top: 1em;
    grid-column: text;
  }

  .dt-tags .dt-tag {
    text-decoration: none;
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0em 0.4em;
    margin-right: 0.5em;
    margin-bottom: 0.4em;
    font-size: 70%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  d-article table.gt_table td,
  d-article table.gt_table th {
    border-bottom: none;
    font-size: 100%;
  }

  .html-widget {
    margin-bottom: 2.0em;
  }

  .l-screen-inset {
    padding-right: 16px;
  }

  .l-screen .caption {
    margin-left: 10px;
  }

  .shaded {
    background: rgb(247, 247, 247);
    padding-top: 20px;
    padding-bottom: 20px;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .html-widget {
    margin-bottom: 0;
    border: 1px solid rgba(0, 0, 0, 0.1);
  }

  .shaded .shaded-content {
    background: white;
  }

  .text-output {
    margin-top: 0;
    line-height: 1.5em;
  }

  .hidden {
    display: none !important;
  }

  d-article {
    padding-top: 2.5rem;
    padding-bottom: 30px;
  }

  d-appendix {
    padding-top: 30px;
  }

  d-article>p>img {
    width: 100%;
  }

  d-article h2 {
    margin: 1rem 0 1.5rem 0;
  }

  d-article h3 {
    margin-top: 1.5rem;
  }

  d-article iframe {
    border: 1px solid rgba(0, 0, 0, 0.1);
    margin-bottom: 2.0em;
    width: 100%;
  }

  /* Tweak code blocks */

  d-article div.sourceCode code,
  d-article pre code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: auto;
  }

  d-article div.sourceCode {
    background-color: white;
  }

  d-article div.sourceCode pre {
    padding-left: 10px;
    font-size: 12px;
    border-left: 2px solid rgba(0,0,0,0.1);
  }

  d-article pre {
    font-size: 12px;
    color: black;
    background: none;
    margin-top: 0;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  d-article pre a {
    border-bottom: none;
  }

  d-article pre a:hover {
    border-bottom: none;
    text-decoration: underline;
  }

  d-article details {
    grid-column: text;
    margin-bottom: 0.8em;
  }

  @media(min-width: 768px) {

  d-article pre,
  d-article div.sourceCode,
  d-article div.sourceCode pre {
    overflow: visible !important;
  }

  d-article div.sourceCode pre {
    padding-left: 18px;
    font-size: 14px;
  }

  d-article pre {
    font-size: 14px;
  }

  }

  figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  /* CSS for d-contents */

  .d-contents {
    grid-column: text;
    color: rgba(0,0,0,0.8);
    font-size: 0.9em;
    padding-bottom: 1em;
    margin-bottom: 1em;
    padding-bottom: 0.5em;
    margin-bottom: 1em;
    padding-left: 0.25em;
    justify-self: start;
  }

  @media(min-width: 1000px) {
    .d-contents.d-contents-float {
      height: 0;
      grid-column-start: 1;
      grid-column-end: 4;
      justify-self: center;
      padding-right: 3em;
      padding-left: 2em;
    }
  }

  .d-contents nav h3 {
    font-size: 18px;
    margin-top: 0;
    margin-bottom: 1em;
  }

  .d-contents li {
    list-style-type: none
  }

  .d-contents nav > ul {
    padding-left: 0;
  }

  .d-contents ul {
    padding-left: 1em
  }

  .d-contents nav ul li {
    margin-top: 0.6em;
    margin-bottom: 0.2em;
  }

  .d-contents nav a {
    font-size: 13px;
    border-bottom: none;
    text-decoration: none
    color: rgba(0, 0, 0, 0.8);
  }

  .d-contents nav a:hover {
    text-decoration: underline solid rgba(0, 0, 0, 0.6)
  }

  .d-contents nav > ul > li > a {
    font-weight: 600;
  }

  .d-contents nav > ul > li > ul {
    font-weight: inherit;
  }

  .d-contents nav > ul > li > ul > li {
    margin-top: 0.2em;
  }


  .d-contents nav ul {
    margin-top: 0;
    margin-bottom: 0.25em;
  }

  .d-article-with-toc h2:nth-child(2) {
    margin-top: 0;
  }


  /* Figure */

  .figure {
    position: relative;
    margin-bottom: 2.5em;
    margin-top: 1.5em;
  }

  .figure .caption {
    color: rgba(0, 0, 0, 0.6);
    font-size: 12px;
    line-height: 1.5em;
  }

  .figure img.external {
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
    padding: 18px;
    box-sizing: border-box;
  }

  .figure .caption a {
    color: rgba(0, 0, 0, 0.6);
  }

  .figure .caption b,
  .figure .caption strong, {
    font-weight: 600;
    color: rgba(0, 0, 0, 1.0);
  }

  /* Citations */

  d-article .citation {
    color: inherit;
    cursor: inherit;
  }

  div.hanging-indent{
    margin-left: 1em; text-indent: -1em;
  }

  /* Citation hover box */

  .tippy-box[data-theme~=light-border] {
    background-color: rgba(250, 250, 250, 0.95);
  }

  .tippy-content > p {
    margin-bottom: 0;
    padding: 2px;
  }


  /* Tweak 1000px media break to show more text */

  @media(min-width: 1000px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 16px;
    }

    .grid {
      grid-column-gap: 16px;
    }

    d-article {
      font-size: 1.06rem;
      line-height: 1.7em;
    }
    figure .caption, .figure .caption, figure figcaption {
      font-size: 13px;
    }
  }

  @media(min-width: 1180px) {
    .base-grid,
    distill-header,
    d-title,
    d-abstract,
    d-article,
    d-appendix,
    distill-appendix,
    d-byline,
    d-footnote-list,
    d-citation-list,
    distill-footer {
      grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
      grid-column-gap: 32px;
    }

    .grid {
      grid-column-gap: 32px;
    }
  }


  /* Get the citation styles for the appendix (not auto-injected on render since
     we do our own rendering of the citation appendix) */

  d-appendix .citation-appendix,
  .d-appendix .citation-appendix {
    font-size: 11px;
    line-height: 15px;
    border-left: 1px solid rgba(0, 0, 0, 0.1);
    padding-left: 18px;
    border: 1px solid rgba(0,0,0,0.1);
    background: rgba(0, 0, 0, 0.02);
    padding: 10px 18px;
    border-radius: 3px;
    color: rgba(150, 150, 150, 1);
    overflow: hidden;
    margin-top: -12px;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  /* Include appendix styles here so they can be overridden */

  d-appendix {
    contain: layout style;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-top: 60px;
    margin-bottom: 0;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
    color: rgba(0,0,0,0.5);
    padding-top: 60px;
    padding-bottom: 48px;
  }

  d-appendix h3 {
    grid-column: page-start / text-start;
    font-size: 15px;
    font-weight: 500;
    margin-top: 1em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.65);
  }

  d-appendix h3 + * {
    margin-top: 1em;
  }

  d-appendix ol {
    padding: 0 0 0 15px;
  }

  @media (min-width: 768px) {
    d-appendix ol {
      padding: 0 0 0 30px;
      margin-left: -30px;
    }
  }

  d-appendix li {
    margin-bottom: 1em;
  }

  d-appendix a {
    color: rgba(0, 0, 0, 0.6);
  }

  d-appendix > * {
    grid-column: text;
  }

  d-appendix > d-footnote-list,
  d-appendix > d-citation-list,
  d-appendix > distill-appendix {
    grid-column: screen;
  }

  /* Include footnote styles here so they can be overridden */

  d-footnote-list {
    contain: layout style;
  }

  d-footnote-list > * {
    grid-column: text;
  }

  d-footnote-list a.footnote-backlink {
    color: rgba(0,0,0,0.3);
    padding-left: 0.5em;
  }



  /* Anchor.js */

  .anchorjs-link {
    /*transition: all .25s linear; */
    text-decoration: none;
    border-bottom: none;
  }
  *:hover > .anchorjs-link {
    margin-left: -1.125em !important;
    text-decoration: none;
    border-bottom: none;
  }

  /* Social footer */

  .social_footer {
    margin-top: 30px;
    margin-bottom: 0;
    color: rgba(0,0,0,0.67);
  }

  .disqus-comments {
    margin-right: 30px;
  }

  .disqus-comment-count {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
    cursor: pointer;
  }

  #disqus_thread {
    margin-top: 30px;
  }

  .article-sharing a {
    border-bottom: none;
    margin-right: 8px;
  }

  .article-sharing a:hover {
    border-bottom: none;
  }

  .sidebar-section.subscribe {
    font-size: 12px;
    line-height: 1.6em;
  }

  .subscribe p {
    margin-bottom: 0.5em;
  }


  .article-footer .subscribe {
    font-size: 15px;
    margin-top: 45px;
  }


  .sidebar-section.custom {
    font-size: 12px;
    line-height: 1.6em;
  }

  .custom p {
    margin-bottom: 0.5em;
  }

  /* Styles for listing layout (hide title) */
  .layout-listing d-title, .layout-listing .d-title {
    display: none;
  }

  /* Styles for posts lists (not auto-injected) */


  .posts-with-sidebar {
    padding-left: 45px;
    padding-right: 45px;
  }

  .posts-list .description h2,
  .posts-list .description p {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  }

  .posts-list .description h2 {
    font-weight: 700;
    border-bottom: none;
    padding-bottom: 0;
  }

  .posts-list h2.post-tag {
    border-bottom: 1px solid rgba(0, 0, 0, 0.2);
    padding-bottom: 12px;
  }
  .posts-list {
    margin-top: 60px;
    margin-bottom: 24px;
  }

  .posts-list .post-preview {
    text-decoration: none;
    overflow: hidden;
    display: block;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    padding: 24px 0;
  }

  .post-preview-last {
    border-bottom: none !important;
  }

  .posts-list .posts-list-caption {
    grid-column: screen;
    font-weight: 400;
  }

  .posts-list .post-preview h2 {
    margin: 0 0 6px 0;
    line-height: 1.2em;
    font-style: normal;
    font-size: 24px;
  }

  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.4em;
    font-size: 16px;
  }

  .posts-list .post-preview .thumbnail {
    box-sizing: border-box;
    margin-bottom: 24px;
    position: relative;
    max-width: 500px;
  }
  .posts-list .post-preview img {
    width: 100%;
    display: block;
  }

  .posts-list .metadata {
    font-size: 12px;
    line-height: 1.4em;
    margin-bottom: 18px;
  }

  .posts-list .metadata > * {
    display: inline-block;
  }

  .posts-list .metadata .publishedDate {
    margin-right: 2em;
  }

  .posts-list .metadata .dt-authors {
    display: block;
    margin-top: 0.3em;
    margin-right: 2em;
  }

  .posts-list .dt-tags {
    display: block;
    line-height: 1em;
  }

  .posts-list .dt-tags .dt-tag {
    display: inline-block;
    color: rgba(0,0,0,0.6);
    padding: 0.3em 0.4em;
    margin-right: 0.2em;
    margin-bottom: 0.4em;
    font-size: 60%;
    border: 1px solid rgba(0,0,0,0.2);
    border-radius: 3px;
    text-transform: uppercase;
    font-weight: 500;
  }

  .posts-list img {
    opacity: 1;
  }

  .posts-list img[data-src] {
    opacity: 0;
  }

  .posts-more {
    clear: both;
  }


  .posts-sidebar {
    font-size: 16px;
  }

  .posts-sidebar h3 {
    font-size: 16px;
    margin-top: 0;
    margin-bottom: 0.5em;
    font-weight: 400;
    text-transform: uppercase;
  }

  .sidebar-section {
    margin-bottom: 30px;
  }

  .categories ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }

  .categories li {
    color: rgba(0, 0, 0, 0.8);
    margin-bottom: 0;
  }

  .categories li>a {
    border-bottom: none;
  }

  .categories li>a:hover {
    border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  }

  .categories .active {
    font-weight: 600;
  }

  .categories .category-count {
    color: rgba(0, 0, 0, 0.4);
  }


  @media(min-width: 768px) {
    .posts-list .post-preview h2 {
      font-size: 26px;
    }
    .posts-list .post-preview .thumbnail {
      float: right;
      width: 30%;
      margin-bottom: 0;
    }
    .posts-list .post-preview .description {
      float: left;
      width: 45%;
    }
    .posts-list .post-preview .metadata {
      float: left;
      width: 20%;
      margin-top: 8px;
    }
    .posts-list .post-preview p {
      margin: 0 0 12px 0;
      line-height: 1.5em;
      font-size: 16px;
    }
    .posts-with-sidebar .posts-list {
      float: left;
      width: 75%;
    }
    .posts-with-sidebar .posts-sidebar {
      float: right;
      width: 20%;
      margin-top: 60px;
      padding-top: 24px;
      padding-bottom: 24px;
    }
  }


  /* Improve display for browsers without grid (IE/Edge <= 15) */

  .downlevel {
    line-height: 1.6em;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
    margin: 0;
  }

  .downlevel .d-title {
    padding-top: 6rem;
    padding-bottom: 1.5rem;
  }

  .downlevel .d-title h1 {
    font-size: 50px;
    font-weight: 700;
    line-height: 1.1em;
    margin: 0 0 0.5rem;
  }

  .downlevel .d-title p {
    font-weight: 300;
    font-size: 1.2rem;
    line-height: 1.55em;
    margin-top: 0;
  }

  .downlevel .d-byline {
    padding-top: 0.8em;
    padding-bottom: 0.8em;
    font-size: 0.8rem;
    line-height: 1.8em;
  }

  .downlevel .section-separator {
    border: none;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
  }

  .downlevel .d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
    padding-top: 1rem;
    padding-bottom: 2rem;
  }


  .downlevel .d-appendix {
    padding-left: 0;
    padding-right: 0;
    max-width: none;
    font-size: 0.8em;
    line-height: 1.7em;
    margin-bottom: 0;
    color: rgba(0,0,0,0.5);
    padding-top: 40px;
    padding-bottom: 48px;
  }

  .downlevel .footnotes ol {
    padding-left: 13px;
  }

  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
    padding-left: 40px;
    padding-right: 40px;
  }

  @media(min-width: 768px) {
    .downlevel .base-grid,
    .downlevel .distill-header,
    .downlevel .d-title,
    .downlevel .d-abstract,
    .downlevel .d-article,
    .downlevel .d-appendix,
    .downlevel .distill-appendix,
    .downlevel .d-byline,
    .downlevel .d-footnote-list,
    .downlevel .d-citation-list,
    .downlevel .distill-footer,
    .downlevel .appendix-bottom,
    .downlevel .posts-container {
    padding-left: 150px;
    padding-right: 150px;
    max-width: 900px;
  }
  }

  .downlevel pre code {
    display: block;
    border-left: 2px solid rgba(0, 0, 0, .1);
    padding: 0 0 0 20px;
    font-size: 14px;
  }

  .downlevel code, .downlevel pre {
    color: black;
    background: none;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;

    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;

    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
  }

  .downlevel .posts-list .post-preview {
    color: inherit;
  }



  </style>

  <script type="application/javascript">

  function is_downlevel_browser() {
    if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                   window.navigator.userAgent)) {
      return true;
    } else {
      return window.load_distill_framework === undefined;
    }
  }

  // show body when load is complete
  function on_load_complete() {

    // add anchors
    if (window.anchors) {
      window.anchors.options.placement = 'left';
      window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
    }


    // set body to visible
    document.body.style.visibility = 'visible';

    // force redraw for leaflet widgets
    if (window.HTMLWidgets) {
      var maps = window.HTMLWidgets.findAll(".leaflet");
      $.each(maps, function(i, el) {
        var map = this.getMap();
        map.invalidateSize();
        map.eachLayer(function(layer) {
          if (layer instanceof L.TileLayer)
            layer.redraw();
        });
      });
    }

    // trigger 'shown' so htmlwidgets resize
    $('d-article').trigger('shown');
  }

  function init_distill() {

    init_common();

    // create front matter
    var front_matter = $('<d-front-matter></d-front-matter>');
    $('#distill-front-matter').wrap(front_matter);

    // create d-title
    $('.d-title').changeElementType('d-title');

    // create d-byline
    var byline = $('<d-byline></d-byline>');
    $('.d-byline').replaceWith(byline);

    // create d-article
    var article = $('<d-article></d-article>');
    $('.d-article').wrap(article).children().unwrap();

    // move posts container into article
    $('.posts-container').appendTo($('d-article'));

    // create d-appendix
    $('.d-appendix').changeElementType('d-appendix');

    // flag indicating that we have appendix items
    var appendix = $('.appendix-bottom').children('h3').length > 0;

    // replace footnotes with <d-footnote>
    $('.footnote-ref').each(function(i, val) {
      appendix = true;
      var href = $(this).attr('href');
      var id = href.replace('#', '');
      var fn = $('#' + id);
      var fn_p = $('#' + id + '>p');
      fn_p.find('.footnote-back').remove();
      var text = fn_p.html();
      var dtfn = $('<d-footnote></d-footnote>');
      dtfn.html(text);
      $(this).replaceWith(dtfn);
    });
    // remove footnotes
    $('.footnotes').remove();

    // move refs into #references-listing
    $('#references-listing').replaceWith($('#refs'));

    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      var id = $(this).attr('id');
      $('.d-contents a[href="#' + id + '"]').parent().remove();
      appendix = true;
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
    });

    // show d-appendix if we have appendix content
    $("d-appendix").css('display', appendix ? 'grid' : 'none');

    // localize layout chunks to just output
    $('.layout-chunk').each(function(i, val) {

      // capture layout
      var layout = $(this).attr('data-layout');

      // apply layout to markdown level block elements
      var elements = $(this).children().not('details, div.sourceCode, pre, script');
      elements.each(function(i, el) {
        var layout_div = $('<div class="' + layout + '"></div>');
        if (layout_div.hasClass('shaded')) {
          var shaded_content = $('<div class="shaded-content"></div>');
          $(this).wrap(shaded_content);
          $(this).parent().wrap(layout_div);
        } else {
          $(this).wrap(layout_div);
        }
      });


      // unwrap the layout-chunk div
      $(this).children().unwrap();
    });

    // remove code block used to force  highlighting css
    $('.distill-force-highlighting-css').parent().remove();

    // remove empty line numbers inserted by pandoc when using a
    // custom syntax highlighting theme
    $('code.sourceCode a:empty').remove();

    // load distill framework
    load_distill_framework();

    // wait for window.distillRunlevel == 4 to do post processing
    function distill_post_process() {

      if (!window.distillRunlevel || window.distillRunlevel < 4)
        return;

      // hide author/affiliations entirely if we have no authors
      var front_matter = JSON.parse($("#distill-front-matter").html());
      var have_authors = front_matter.authors && front_matter.authors.length > 0;
      if (!have_authors)
        $('d-byline').addClass('hidden');

      // article with toc class
      $('.d-contents').parent().addClass('d-article-with-toc');

      // strip links that point to #
      $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

      // add orcid ids
      $('.authors-affiliations').find('.author').each(function(i, el) {
        var orcid_id = front_matter.authors[i].orcidID;
        if (orcid_id) {
          var a = $('<a></a>');
          a.attr('href', 'https://orcid.org/' + orcid_id);
          var img = $('<img></img>');
          img.addClass('orcid-id');
          img.attr('alt', 'ORCID ID');
          img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
          a.append(img);
          $(this).append(a);
        }
      });

      // hide elements of author/affiliations grid that have no value
      function hide_byline_column(caption) {
        $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
      }

      // affiliations
      var have_affiliations = false;
      for (var i = 0; i<front_matter.authors.length; ++i) {
        var author = front_matter.authors[i];
        if (author.affiliation !== "&nbsp;") {
          have_affiliations = true;
          break;
        }
      }
      if (!have_affiliations)
        $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

      // published date
      if (!front_matter.publishedDate)
        hide_byline_column("Published");

      // document object identifier
      var doi = $('d-byline').find('h3:contains("DOI")');
      var doi_p = doi.next().empty();
      if (!front_matter.doi) {
        // if we have a citation and valid citationText then link to that
        if ($('#citation').length > 0 && front_matter.citationText) {
          doi.html('Citation');
          $('<a href="#citation"></a>')
            .text(front_matter.citationText)
            .appendTo(doi_p);
        } else {
          hide_byline_column("DOI");
        }
      } else {
        $('<a></a>')
           .attr('href', "https://doi.org/" + front_matter.doi)
           .html(front_matter.doi)
           .appendTo(doi_p);
      }

       // change plural form of authors/affiliations
      if (front_matter.authors.length === 1) {
        var grid = $('.authors-affiliations');
        grid.children('h3:contains("Authors")').text('Author');
        grid.children('h3:contains("Affiliations")').text('Affiliation');
      }

      // remove d-appendix and d-footnote-list local styles
      $('d-appendix > style:first-child').remove();
      $('d-footnote-list > style:first-child').remove();

      // move appendix-bottom entries to the bottom
      $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
      $('.appendix-bottom').remove();

      // hoverable references
      $('span.citation[data-cites]').each(function() {
        const citeChild = $(this).children()[0]
        // Do not process if @xyz has been used without escaping and without bibliography activated
        // https://github.com/rstudio/distill/issues/466
        if (citeChild === undefined) return true

        if (citeChild.nodeName == "D-FOOTNOTE") {
          var fn = citeChild
          $(this).html(fn.shadowRoot.querySelector("sup"))
          $(this).id = fn.id
          fn.remove()
        }
        var refs = $(this).attr('data-cites').split(" ");
        var refHtml = refs.map(function(ref) {
          // Could use CSS.escape too here, we insure backward compatibility in navigator
          return "<p>" + $('div[id="ref-' + ref + '"]').html() + "</p>";
        }).join("\n");
        window.tippy(this, {
          allowHTML: true,
          content: refHtml,
          maxWidth: 500,
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start'
        });
      });

      // fix footnotes in tables (#411)
      // replacing broken distill.pub feature
      $('table d-footnote').each(function() {
        // we replace internal showAtNode methode which is triggered when hovering a footnote
        this.hoverBox.showAtNode = function(node) {
          // ported from https://github.com/distillpub/template/pull/105/files
          calcOffset = function(elem) {
              let x = elem.offsetLeft;
              let y = elem.offsetTop;
              // Traverse upwards until an `absolute` element is found or `elem`
              // becomes null.
              while (elem = elem.offsetParent && elem.style.position != 'absolute') {
                  x += elem.offsetLeft;
                  y += elem.offsetTop;
              }

              return { left: x, top: y };
          }
          // https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetTop
          const bbox = node.getBoundingClientRect();
          const offset = calcOffset(node);
          this.show([offset.left + bbox.width, offset.top + bbox.height]);
        }
      })

      // clear polling timer
      clearInterval(tid);

      // show body now that everything is ready
      on_load_complete();
    }

    var tid = setInterval(distill_post_process, 50);
    distill_post_process();

  }

  function init_downlevel() {

    init_common();

     // insert hr after d-title
    $('.d-title').after($('<hr class="section-separator"/>'));

    // check if we have authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;

    // manage byline/border
    if (!have_authors)
      $('.d-byline').remove();
    $('.d-byline').after($('<hr class="section-separator"/>'));
    $('.d-byline a').remove();

    // remove toc
    $('.d-contents').remove();

    // move appendix elements
    $('h1.appendix, h2.appendix').each(function(i, val) {
      $(this).changeElementType('h3');
    });
    $('h3.appendix').each(function(i, val) {
      $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
    });


    // inject headers into references and footnotes
    var refs_header = $('<h3></h3>');
    refs_header.text('References');
    $('#refs').prepend(refs_header);

    var footnotes_header = $('<h3></h3');
    footnotes_header.text('Footnotes');
    $('.footnotes').children('hr').first().replaceWith(footnotes_header);

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // remove appendix if it's empty
    if ($('.d-appendix').children().length === 0)
      $('.d-appendix').remove();

    // prepend separator above appendix
    $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

    // trim code
    $('pre>code').each(function(i, val) {
      $(this).html($.trim($(this).html()));
    });

    // move posts-container right before article
    $('.posts-container').insertBefore($('.d-article'));

    $('body').addClass('downlevel');

    on_load_complete();
  }


  function init_common() {

    // jquery plugin to change element types
    (function($) {
      $.fn.changeElementType = function(newType) {
        var attrs = {};

        $.each(this[0].attributes, function(idx, attr) {
          attrs[attr.nodeName] = attr.nodeValue;
        });

        this.replaceWith(function() {
          return $("<" + newType + "/>", attrs).append($(this).contents());
        });
      };
    })(jQuery);

    // prevent underline for linked images
    $('a > img').parent().css({'border-bottom' : 'none'});

    // mark non-body figures created by knitr chunks as 100% width
    $('.layout-chunk').each(function(i, val) {
      var figures = $(this).find('img, .html-widget');
      // ignore leaflet img layers (#106)
      figures = figures.filter(':not(img[class*="leaflet"])')
      if ($(this).attr('data-layout') !== "l-body") {
        figures.css('width', '100%');
      } else {
        figures.css('max-width', '100%');
        figures.filter("[width]").each(function(i, val) {
          var fig = $(this);
          fig.css('width', fig.attr('width') + 'px');
        });

      }
    });

    // auto-append index.html to post-preview links in file: protocol
    // and in rstudio ide preview
    $('.post-preview').each(function(i, val) {
      if (window.location.protocol === "file:")
        $(this).attr('href', $(this).attr('href') + "index.html");
    });

    // get rid of index.html references in header
    if (window.location.protocol !== "file:") {
      $('.distill-site-header a[href]').each(function(i,val) {
        $(this).attr('href', $(this).attr('href').replace(/^index[.]html/, "./"));
      });
    }

    // add class to pandoc style tables
    $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
    $('.kable-table').children('table').addClass('pandoc-table');

    // add figcaption style to table captions
    $('caption').parent('table').addClass("figcaption");

    // initialize posts list
    if (window.init_posts_list)
      window.init_posts_list();

    // implmement disqus comment link
    $('.disqus-comment-count').click(function() {
      window.headroom_prevent_pin = true;
      $('#disqus_thread').toggleClass('hidden');
      if (!$('#disqus_thread').hasClass('hidden')) {
        var offset = $(this).offset();
        $(window).resize();
        $('html, body').animate({
          scrollTop: offset.top - 35
        });
      }
    });
  }

  document.addEventListener('DOMContentLoaded', function() {
    if (is_downlevel_browser())
      init_downlevel();
    else
      window.addEventListener('WebComponentsReady', init_distill);
  });

  </script>

  <!--/radix_placeholder_distill-->
  <script src="bootstrappingregressions_files/header-attrs-2.16/header-attrs.js"></script>
  <link href="bootstrappingregressions_files/vembedr-0.1.5/css/vembedr.css" rel="stylesheet" />
  <script src="bootstrappingregressions_files/jquery-3.6.0/jquery-3.6.0.min.js"></script>
  <script src="bootstrappingregressions_files/popper-2.6.0/popper.min.js"></script>
  <link href="bootstrappingregressions_files/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="bootstrappingregressions_files/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="bootstrappingregressions_files/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="bootstrappingregressions_files/anchor-4.2.2/anchor.min.js"></script>
  <script src="bootstrappingregressions_files/bowser-1.9.3/bowser.min.js"></script>
  <script src="bootstrappingregressions_files/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="bootstrappingregressions_files/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
  <!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"4 Reasons Non-Parametric Bootstrapped Regression (with tidymodels) is Better thаn Ordinary Regression","description":"If the assumptions of parametric models can be satisfied, parametric models are the way to go. However, there are often many assumptions and to satisfy them all is rarely possible. Data transformation or using non-parametric methods are two solutions for that. In this post we'll learn the Non-Parametric Bootstrapped Regression as an alternative for the Ordinary Linear Regression in case when assumptions are violated.","authors":[{"author":"Yury Zablotski","authorURL":"https://yuzar-blog.netlify.app/","affiliation":"&nbsp;","affiliationURL":"#","orcidID":""}],"publishedDate":"2022-10-07T00:00:00.000+02:00","citationText":"Zablotski, 2022"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>4 Reasons Non-Parametric Bootstrapped Regression (with tidymodels) is Better thаn Ordinary Regression</h1>
<!--radix_placeholder_categories-->
<div class="dt-tags">
<div class="dt-tag">videos</div>
<div class="dt-tag">statistics</div>
<div class="dt-tag">visualization</div>
<div class="dt-tag">models</div>
</div>
<!--/radix_placeholder_categories-->
<p><p>If the assumptions of parametric models can be satisfied, parametric models are the way to go. However, there are often many assumptions and to satisfy them all is rarely possible. Data transformation or using non-parametric methods are two solutions for that. In this post we’ll learn the Non-Parametric Bootstrapped Regression as an alternative for the Ordinary Linear Regression in case when assumptions are violated.</p></p>
</div>

<div class="d-byline">
  Yury Zablotski <a href="https://yuzar-blog.netlify.app/" class="uri">https://yuzar-blog.netlify.app/</a> 
  
<br/>October 07, 2022
</div>

<div class="d-article">
<div class="d-contents d-contents-float">
<nav class="l-text toc figcaption" id="TOC">
<h3>Contents</h3>
<ul>
<li><a href="#this-post-as-a-video-in-making" id="toc-this-post-as-a-video-in-making">This post as a video (in making)</a></li>
<li><a href="#the-problem-with-ordinary-linear-models" id="toc-the-problem-with-ordinary-linear-models">The problem with ordinary linear models</a></li>
<li><a href="#why-should-we-nonparametrically-bootstrap-regressions" id="toc-why-should-we-nonparametrically-bootstrap-regressions">Why should we nonparametrically bootstrap regressions?</a></li>
<li><a href="#what-is---a-bootstrap" id="toc-what-is---a-bootstrap">What is - a bootstrap?</a></li>
<li><a href="#steps-to-compute-bootstrapped-regression" id="toc-steps-to-compute-bootstrapped-regression">4 steps to compute bootstrapped regression</a>
<ul>
<li><a href="#bootstrap-the-data-with-resampling" id="toc-bootstrap-the-data-with-resampling">1. Bootstrap the data with resampling</a></li>
<li><a href="#produce-1000-models" id="toc-produce-1000-models">2. Produce 1000 models</a></li>
<li><a href="#plot-estimates-distribution-of-1000-estimates" id="toc-plot-estimates-distribution-of-1000-estimates">3. Plot estimates distribution of 1000 estimates</a></li>
<li><a href="#get-and-visualize-predictions" id="toc-get-and-visualize-predictions">4. Get and visualize predictions</a></li>
</ul></li>
<li><a href="#bootstrapping-numeric-predictors" id="toc-bootstrapping-numeric-predictors">Bootstrapping numeric predictors</a></li>
<li><a href="#problems" id="toc-problems">Problems</a></li>
<li><a href="#further-readings-and-references" id="toc-further-readings-and-references">Further readings and references</a></li>
</ul>
</nav>
</div>
<h1 id="this-post-as-a-video-in-making">This post as a video (in making)</h1>
<p>I recommend to watch a video first, because I highlight things I talk about. It’s less then … minutes long.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="vembedr">
<div>
<iframe src="https://www.youtube.com/embed/sjCxIHVGkdE" width="533" height="300" frameborder="0" allowfullscreen="" data-external="1"></iframe>
</div>
</div>
</div>
<h1 id="the-problem-with-ordinary-linear-models">The problem with ordinary linear models</h1>
<p>If we want to compare salaries of people with different education, we could create a simple linear model and plot the results. But we can not trust these results, without checking the assumptions of our model, because if assumptions are violated, the results might be wrong. However, the problem with assumptions is that there are too many, and most of the time we can’t satisfy them all.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://tidymodels.tidymodels.org'>tidymodels</a></span><span class='op'>)</span>   <span class='co'># for everything good in R ;)</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://www.statlearning.com'>ISLR</a></span><span class='op'>)</span>         <span class='co'># for "Wage" dataset</span></span>
<span></span>
<span><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>9999</span><span class='op'>)</span>        <span class='co'># makes sure we get the same 100 lines</span></span>
<span><span class='va'>salary</span> <span class='op'>&lt;-</span> <span class='va'>Wage</span> <span class='op'>%&gt;%</span></span>
<span>  <span class='fu'>sample_n</span><span class='op'>(</span><span class='fl'>100</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>m</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>wage</span> <span class='op'>~</span> <span class='va'>education</span>, <span class='va'>salary</span><span class='op'>)</span></span>
<span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://strengejacke.github.io/sjPlot/'>sjPlot</a></span><span class='op'>)</span>      <span class='co'># I have a video on "sjPlot" 📦</span></span>
<span><span class='fu'>theme_set</span><span class='op'>(</span><span class='fu'>theme_test</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span></span>
<span><span class='fu'><a href='https://strengejacke.github.io/sjPlot/reference/plot_model.html'>plot_model</a></span><span class='op'>(</span><span class='va'>m</span>, type <span class='op'>=</span> <span class='st'>"pred"</span>, show.data <span class='op'>=</span> <span class='cn'>TRUE</span>, jitter <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>$education</code></pre>
<p><img src="bootstrappingregressions_files/figure-html5/unnamed-chunk-2-1.png" width="624" /></p>
</div>
<p>For instance, our model has not-normally distributed residuals, the variances between groups differ and we have heteroskedasticity. So, we can’t trust our results, without fixing them, but when we start fixing assumptions, we might (1) either lose data (if, for example, we remove some influential points), (2) we might reduce interpretability (when we log-transform data) or screw up other assumptions even more, because data manipulation constantly changes the <strong>parameters</strong> of our - <strong>parametric</strong> model. And here is where <strong>non-parametric bootstraped regression</strong> comes into play.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://easystats.github.io/performance/'>performance</a></span><span class='op'>)</span> <span class='co'># I have a video on "performance" 📦 </span></span>
<span></span>
<span><span class='fu'><a href='https://easystats.github.io/performance/reference/check_normality.html'>check_normality</a></span><span class='op'>(</span><span class='va'>m</span><span class='op'>)</span>          <span class='co'># Shapiro-Wilk normality test</span></span></code></pre>
</div>
<pre><code>Warning: Non-normality of residuals detected (p &lt; .001).</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://easystats.github.io/performance/reference/check_normality.html'>check_normality</a></span><span class='op'>(</span><span class='va'>m</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span>type <span class='op'>=</span> <span class='st'>"qq"</span><span class='op'>)</span></span></code></pre>
</div>
<img src="bootstrappingregressions_files/figure-html5/unnamed-chunk-3-1.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://easystats.github.io/performance/reference/check_homogeneity.html'>check_homogeneity</a></span><span class='op'>(</span><span class='va'>m</span><span class='op'>)</span>        <span class='co'># Bartlett test </span></span></code></pre>
</div>
<pre><code>Warning: Variances differ between groups (Bartlett Test, p = 0.000).</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://easystats.github.io/performance/reference/check_homogeneity.html'>check_homogeneity</a></span><span class='op'>(</span><span class='va'>m</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='op'>)</span></span></code></pre>
</div>
<img src="bootstrappingregressions_files/figure-html5/unnamed-chunk-3-2.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://easystats.github.io/performance/reference/check_heteroscedasticity.html'>check_heteroscedasticity</a></span><span class='op'>(</span><span class='va'>m</span><span class='op'>)</span> <span class='co'># Breusch-Pagan test</span></span></code></pre>
</div>
<pre><code>Warning: Heteroscedasticity (non-constant error variance) detected (p &lt; .001).</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://easystats.github.io/performance/reference/check_heteroscedasticity.html'>check_heteroscedasticity</a></span><span class='op'>(</span><span class='va'>m</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="bootstrappingregressions_files/figure-html5/unnamed-chunk-3-3.png" width="624" /></p>
</div>
<h1 id="why-should-we-nonparametrically-bootstrap-regressions">Why should we nonparametrically bootstrap regressions?</h1>
<p>The 4 reasons a bootstrapped model is better then usual linear model, is that bootstrapping:</p>
<ol type="1">
<li><p>does not have any distributional assumptions (such as normally distributed residuals or equal variances among groups)</p></li>
<li><p>bootstrapped models provide more accurate inferences, e.g. confidence intervals <a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>, which we’ll soon prove on these two examples, one with categorical and one with numeric predictors</p></li>
<li><p>bootstrapped models work better for small samples and finally</p></li>
<li><p>it describes variation in the data much better than traditional linear models</p></li>
</ol>
<p>Therefore, having bootstrapped models in your tool-box will definitely make you a better data-scientist! So …</p>
<h1 id="what-is---a-bootstrap">What is - a bootstrap?</h1>
<p>In order to better understand how bootstrap models work, we need to understand what the bootstrap itself actually is. A bootstrapp is the little loop on the back of a boot to help you pool it on. And the phrase “pulling oneself up by one’s bootstraps” means to succeed without any external help. For data it simply means - resampling.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://indrajeetpatil.github.io/ggstatsplot/'>ggstatsplot</a></span><span class='op'>)</span> <span class='co'># I made many videos on "ggstatsplot" 📦</span></span>
<span><span class='fu'><a href='https://indrajeetpatil.github.io/ggstatsplot/reference/ggbetweenstats.html'>ggbetweenstats</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>salary</span>, x <span class='op'>=</span> <span class='va'>education</span>, y <span class='op'>=</span> <span class='va'>wage</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="bootstrappingregressions_files/figure-html5/unnamed-chunk-4-1.png" width="624" /></p>
</div>
<p>So, lets (1) take a very small dataset, (2) resample it 1000 times, (3) calculate bootstrapped coefficients &amp; 95% CIs and (4) compare them to the ordinary regression in order to find out whether bootstrapping model is indeed better!</p>
<h1 id="steps-to-compute-bootstrapped-regression">4 steps to compute bootstrapped regression</h1>
<p>There are only 4 steps to conduct and visualize bootstrapped regression.</p>
<h2 id="bootstrap-the-data-with-resampling">1. Bootstrap the data with resampling</h2>
<p>First, we bootstrap the data, which simply means we take 1000 samples from our 100 data rows. Every of those 1000 samples is of the same size as the original data set, namely 100 rows, but is made using <strong>replacements</strong>, which results into multiple replicates of some of the original rows of the data. <strong>Replacements are necessary, because we would otherwise simply reproduce the original sample</strong>. (The assessment set contains the rows of the original data that were not included in the bootstrap sample.) In order to distinguish bootstrapped samples from the original sample let’s call our bootstrapped samples - splits.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>123</span><span class='op'>)</span></span>
<span><span class='co'># 1000 samples are OK, but with 2000-10000 you are save!</span></span>
<span><span class='va'>boot_data</span> <span class='op'>&lt;-</span> <span class='fu'>bootstraps</span><span class='op'>(</span><span class='va'>salary</span>, times <span class='op'>=</span> <span class='fl'>1000</span><span class='op'>)</span> </span>
<span><span class='va'>boot_data</span></span></code></pre>
</div>
<pre><code># Bootstrap sampling 
# A tibble: 1,000 × 2
   splits           id           
   &lt;list&gt;           &lt;chr&gt;        
 1 &lt;split [100/41]&gt; Bootstrap0001
 2 &lt;split [100/38]&gt; Bootstrap0002
 3 &lt;split [100/42]&gt; Bootstrap0003
 4 &lt;split [100/40]&gt; Bootstrap0004
 5 &lt;split [100/30]&gt; Bootstrap0005
 6 &lt;split [100/30]&gt; Bootstrap0006
 7 &lt;split [100/36]&gt; Bootstrap0007
 8 &lt;split [100/35]&gt; Bootstrap0008
 9 &lt;split [100/32]&gt; Bootstrap0009
10 &lt;split [100/36]&gt; Bootstrap0010
# … with 990 more rows</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>boot_data</span><span class='op'>$</span><span class='va'>splits</span><span class='op'>[[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>]</span></span></code></pre>
</div>
<pre><code>&lt;Analysis/Assess/Total&gt;
&lt;100/41/100&gt;</code></pre>
</div>
<h2 id="produce-1000-models">2. Produce 1000 models</h2>
<p>Then we <strong>fit a linear model</strong> to every <strong>split</strong> using the first <code>map()</code> function and tidy up model coefficients with the second <code>map()</code> function. Let’s use “0 +” in the model formula to remove the Intercept, because we are interested in estimates of the salary and not the slope of change from that Intercept.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>boot_models</span> <span class='op'>&lt;-</span> <span class='va'>boot_data</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'>mutate</span><span class='op'>(</span>model <span class='op'>=</span> <span class='fu'>map</span><span class='op'>(</span><span class='va'>splits</span>, <span class='op'>~</span><span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>wage</span> <span class='op'>~</span> <span class='fl'>0</span> <span class='op'>+</span> <span class='va'>education</span>, data <span class='op'>=</span> <span class='va'>.</span><span class='op'>)</span><span class='op'>)</span>, </span>
<span>         coefs <span class='op'>=</span> <span class='fu'>map</span><span class='op'>(</span><span class='va'>model</span>, <span class='va'>tidy</span><span class='op'>)</span> <span class='op'>)</span> <span class='co'># optional "conf.int = TRUE"</span></span>
<span></span>
<span><span class='va'>boot_models</span></span></code></pre>
</div>
<pre><code># Bootstrap sampling 
# A tibble: 1,000 × 4
   splits           id            model  coefs           
   &lt;list&gt;           &lt;chr&gt;         &lt;list&gt; &lt;list&gt;          
 1 &lt;split [100/41]&gt; Bootstrap0001 &lt;lm&gt;   &lt;tibble [5 × 5]&gt;
 2 &lt;split [100/38]&gt; Bootstrap0002 &lt;lm&gt;   &lt;tibble [5 × 5]&gt;
 3 &lt;split [100/42]&gt; Bootstrap0003 &lt;lm&gt;   &lt;tibble [5 × 5]&gt;
 4 &lt;split [100/40]&gt; Bootstrap0004 &lt;lm&gt;   &lt;tibble [5 × 5]&gt;
 5 &lt;split [100/30]&gt; Bootstrap0005 &lt;lm&gt;   &lt;tibble [5 × 5]&gt;
 6 &lt;split [100/30]&gt; Bootstrap0006 &lt;lm&gt;   &lt;tibble [5 × 5]&gt;
 7 &lt;split [100/36]&gt; Bootstrap0007 &lt;lm&gt;   &lt;tibble [5 × 5]&gt;
 8 &lt;split [100/35]&gt; Bootstrap0008 &lt;lm&gt;   &lt;tibble [5 × 5]&gt;
 9 &lt;split [100/32]&gt; Bootstrap0009 &lt;lm&gt;   &lt;tibble [5 × 5]&gt;
10 &lt;split [100/36]&gt; Bootstrap0010 &lt;lm&gt;   &lt;tibble [5 × 5]&gt;
# … with 990 more rows</code></pre>
</div>
<h2 id="plot-estimates-distribution-of-1000-estimates">3. Plot estimates distribution of 1000 estimates</h2>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>boot_coefs</span> <span class='op'>&lt;-</span> <span class='va'>boot_models</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'>unnest</span><span class='op'>(</span><span class='va'>coefs</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'>select</span><span class='op'>(</span><span class='va'>term</span>, <span class='va'>estimate</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>boot_coefs</span></span></code></pre>
</div>
<pre><code># A tibble: 5,000 × 2
   term                        estimate
   &lt;chr&gt;                          &lt;dbl&gt;
 1 education1. &lt; HS Grad           85.5
 2 education2. HS Grad             87.3
 3 education3. Some College       107. 
 4 education4. College Grad       127. 
 5 education5. Advanced Degree    174. 
 6 education1. &lt; HS Grad           85.0
 7 education2. HS Grad             95.1
 8 education3. Some College       109. 
 9 education4. College Grad       150. 
10 education5. Advanced Degree    149. 
# … with 4,990 more rows</code></pre>
</div>
<p>Now, we not only have 1000 models, which are nested in the column “model”, but also the results of those models which are nested in the column “coefficients”. And if we <code>unnest()</code> the coefficients, we’ll see 5 estimates for every of our 1000 models. It’s like we have done 1000 experiments, which we can immediately visualize as a distribution.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>boot_coefs</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>estimate</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'>geom_histogram</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'>facet_wrap</span><span class='op'>(</span><span class='op'>~</span><span class='va'>term</span>, scales <span class='op'>=</span> <span class='st'>"free"</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="bootstrappingregressions_files/figure-html5/unnamed-chunk-8-1.png" width="864" /></p>
</div>
<p>First of all, the distributions seem normal, or bell-shaped, which is already amazing because we can use average estimates ;). But despite normal distribution, I still would prefer median estimate for every group instead of the mean. That makes our non-parametric estimates even more robust, since median is estimated by another wonderful robust technique - <strong>quantile-regression</strong>, which is also used when the assumptions of linear regression are not met. I find it really cool! But the coolest thing about this distribution and quantile-function is that we can easily get not only classic 95% Confidence Intervals, <strong>but any intervals we want</strong>. Which is kind of hard to get out of the ordinary model. Thus, we actually have more than 4 advantages 🥳 of the bootstrapped model.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>boot_meds</span> <span class='op'>&lt;-</span> <span class='va'>boot_coefs</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'>group_by</span><span class='op'>(</span><span class='va'>term</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'>summarise</span><span class='op'>(</span></span>
<span>    med_est   <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/median.html'>median</a></span><span class='op'>(</span><span class='va'>estimate</span><span class='op'>)</span>,</span>
<span>    quantile  <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/quantile.html'>quantile</a></span><span class='op'>(</span><span class='va'>estimate</span>, <span class='fl'>0.5</span>  <span class='op'>)</span>,</span>
<span>    conf.low  <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/quantile.html'>quantile</a></span><span class='op'>(</span><span class='va'>estimate</span>, <span class='fl'>0.025</span><span class='op'>)</span>,</span>
<span>    conf.high <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/quantile.html'>quantile</a></span><span class='op'>(</span><span class='va'>estimate</span>, <span class='fl'>0.975</span><span class='op'>)</span>,</span>
<span>    conf.25   <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/quantile.html'>quantile</a></span><span class='op'>(</span><span class='va'>estimate</span>, <span class='fl'>0.25</span> <span class='op'>)</span>,</span>
<span>    conf.75   <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/quantile.html'>quantile</a></span><span class='op'>(</span><span class='va'>estimate</span>, <span class='fl'>0.75</span> <span class='op'>)</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>boot_meds</span></span></code></pre>
</div>
<pre><code># A tibble: 5 × 7
  term                 med_est quant…¹ conf.…² conf.…³ conf.25 conf.75
  &lt;chr&gt;                  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
1 education1. &lt; HS Gr…    91.4    91.4    75.9    108.    85.8    97.3
2 education2. HS Grad     94.4    94.4    86.9    103.    91.5    97.3
3 education3. Some Co…   106.    106.     99.5    114.   104.    109. 
4 education4. College…   134.    134.    110.     165.   126.    143. 
5 education5. Advance…   153.    153.    119.     191.   140.    164. 
# … with abbreviated variable names ¹​quantile, ²​conf.low, ³​conf.high</code></pre>
</div>
<p>And when we plot our estimates we can clearly see that 50% of people who did not finish a high school, will never reach a salary of 100 thousands, while 95% of folks with higher education will never earn below 100 thousands bugs. Waw! So, education matters!</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>boot_coefs</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>estimate</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'>geom_rect</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>med_est</span>, xmin <span class='op'>=</span> <span class='va'>conf.low</span>, xmax <span class='op'>=</span> <span class='va'>conf.high</span>, ymin <span class='op'>=</span> <span class='fl'>0</span>, ymax <span class='op'>=</span> <span class='cn'>Inf</span><span class='op'>)</span>, data <span class='op'>=</span> <span class='va'>boot_meds</span>, alpha <span class='op'>=</span> <span class='fl'>0.1</span>, fill <span class='op'>=</span> <span class='st'>"green"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'>geom_rect</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>med_est</span>, xmin <span class='op'>=</span> <span class='va'>conf.25</span>, xmax <span class='op'>=</span> <span class='va'>conf.75</span>, ymin <span class='op'>=</span> <span class='fl'>0</span>, ymax <span class='op'>=</span> <span class='cn'>Inf</span><span class='op'>)</span>, data <span class='op'>=</span> <span class='va'>boot_meds</span>, alpha <span class='op'>=</span> <span class='fl'>0.3</span>, fill <span class='op'>=</span> <span class='st'>"green"</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'>geom_density</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'>geom_vline</span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>boot_meds</span>, <span class='fu'>aes</span><span class='op'>(</span>xintercept <span class='op'>=</span> <span class='va'>med_est</span><span class='op'>)</span><span class='op'>)</span><span class='op'>+</span></span>
<span>  <span class='fu'>facet_wrap</span><span class='op'>(</span><span class='op'>~</span><span class='va'>term</span>, scales <span class='op'>=</span> <span class='st'>"free"</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="bootstrappingregressions_files/figure-html5/unnamed-chunk-10-1.png" width="864" /></p>
</div>
<p>But what blew my mind even more the first time I learned to bootstrap regression estimates, is that I can even get a distribution of p-values :). For that we just (1) remodel 1000 … ahhh, what a hell, let’s remodel 10.000 models with the Intercept, (2) unnest out coefficients again and (3) visualize the distribution of our 10.000 p.values. Now you see why it’s always better to take median instead of mean.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>boot_models</span> <span class='op'>&lt;-</span> <span class='fu'>bootstraps</span><span class='op'>(</span><span class='va'>salary</span>, times <span class='op'>=</span> <span class='fl'>10000</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'>mutate</span><span class='op'>(</span>model <span class='op'>=</span> <span class='fu'>map</span><span class='op'>(</span><span class='va'>splits</span>, <span class='op'>~</span><span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>wage</span> <span class='op'>~</span> <span class='va'>education</span>, data <span class='op'>=</span> <span class='va'>.</span><span class='op'>)</span><span class='op'>)</span>, </span>
<span>         coefs <span class='op'>=</span> <span class='fu'>map</span><span class='op'>(</span><span class='va'>model</span>, <span class='va'>tidy</span><span class='op'>)</span> <span class='op'>)</span> <span class='co'># optional "conf.int = TRUE"</span></span>
<span></span>
<span><span class='va'>boot_coefs</span> <span class='op'>&lt;-</span> <span class='va'>boot_models</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'>unnest</span><span class='op'>(</span><span class='va'>coefs</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'>select</span><span class='op'>(</span><span class='va'>term</span>, <span class='va'>p.value</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>boot_coefs</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>  <span class='fu'>ggplot</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>p.value</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'>geom_histogram</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'>facet_wrap</span><span class='op'>(</span><span class='op'>~</span><span class='va'>term</span>, scales <span class='op'>=</span> <span class='st'>"free"</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="bootstrappingregressions_files/figure-html5/unnamed-chunk-11-1.png" width="864" /></p>
</div>
<p>And if we compare mean and median bootstrapped p.values to the p.values from the ordinary models, we’ll see that median bootstrapped p.values are much closer to the the p.values of the ordinary model. And despite the fact that median p.values and ordinary p.values are only slightly different, I would still intuitively trust the bootstrapped p.values more, because they were produced in a statistically robust fashion, where no assumptions were violated.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>boot_coefs</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'>group_by</span><span class='op'>(</span><span class='va'>term</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'>summarise</span><span class='op'>(</span></span>
<span>    mean_boot_p <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>p.value</span><span class='op'>)</span>,</span>
<span>    med_boot_p  <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/median.html'>median</a></span><span class='op'>(</span><span class='va'>p.value</span><span class='op'>)</span></span>
<span>    <span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='co'># remember? m &lt;- lm(wage ~ education, salary)</span></span>
<span>  <span class='fu'>left_join</span><span class='op'>(</span><span class='fu'>tidy</span><span class='op'>(</span><span class='va'>m</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'>select</span><span class='op'>(</span><span class='va'>term</span>, <span class='va'>p.value</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'>mutate_if</span><span class='op'>(</span><span class='va'>is.numeric</span>, <span class='op'>~</span><span class='fu'><a href='https://rdrr.io/r/base/Round.html'>round</a></span><span class='op'>(</span><span class='va'>.</span>, <span class='fl'>4</span><span class='op'>)</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code># A tibble: 5 × 4
  term                        mean_boot_p med_boot_p p.value
  &lt;chr&gt;                             &lt;dbl&gt;      &lt;dbl&gt;   &lt;dbl&gt;
1 (Intercept)                      0.0003     0       0     
2 education2. HS Grad              0.652      0.686   0.862 
3 education3. Some College         0.417      0.374   0.384 
4 education4. College Grad         0.0632     0.0153  0.0145
5 education5. Advanced Degree      0.0238     0.0017  0.0015</code></pre>
</div>
<h2 id="get-and-visualize-predictions">4. Get and visualize predictions</h2>
<p>Finally, here is the moment we’ve been waiting for:</p>
<ul>
<li>let’s use the <code>augment()</code> command to produce predictions for every of our 10.000 models,</li>
<li>then calculate a median and 95% CIs from our predictions</li>
<li>calculate predictions made by the ordinary linear regression</li>
<li>combine two results into one dataset and</li>
<li>compare them visually by
<ul>
<li>first plotting our original 100 observations and then</li>
<li>display predictions of both models to see which describes the data best</li>
</ul></li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># get predictions</span></span>
<span><span class='va'>boot_aug</span> <span class='op'>&lt;-</span> <span class='va'>boot_models</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'>mutate</span><span class='op'>(</span>augmented <span class='op'>=</span> <span class='fu'>map</span><span class='op'>(</span><span class='va'>model</span>, <span class='va'>augment</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'>unnest</span><span class='op'>(</span><span class='va'>augmented</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'>select</span><span class='op'>(</span><span class='op'>-</span><span class='va'>splits</span>, <span class='op'>-</span><span class='va'>model</span><span class='op'>)</span></span>
<span></span>
<span><span class='co'># get median estimates, median 95% CIs</span></span>
<span><span class='va'>nonpar_med_boot_preds</span> <span class='op'>&lt;-</span> <span class='va'>boot_aug</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'>group_by</span><span class='op'>(</span><span class='va'>education</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'>summarise</span><span class='op'>(</span></span>
<span>    predicted <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/median.html'>median</a></span><span class='op'>(</span><span class='va'>.fitted</span> <span class='op'>)</span>,</span>
<span>    conf.low  <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/quantile.html'>quantile</a></span><span class='op'>(</span><span class='va'>.fitted</span>, <span class='fl'>0.025</span><span class='op'>)</span>,</span>
<span>    conf.high <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/quantile.html'>quantile</a></span><span class='op'>(</span><span class='va'>.fitted</span>, <span class='fl'>0.975</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'>mutate</span><span class='op'>(</span>model <span class='op'>=</span> <span class='st'>"bootstrapped"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'>select</span><span class='op'>(</span><span class='va'>model</span>, <span class='fu'>everything</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>nonpar_med_boot_preds</span></span></code></pre>
</div>
<pre><code># A tibble: 5 × 5
  model        education          predicted conf.low conf.high
  &lt;chr&gt;        &lt;fct&gt;                  &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
1 bootstrapped 1. &lt; HS Grad            91.6     75.9      108.
2 bootstrapped 2. HS Grad              94.4     86.1      103.
3 bootstrapped 3. Some College        106.      99.4      114.
4 bootstrapped 4. College Grad        134.     110.       163.
5 bootstrapped 5. Advanced Degree     152.     122.       189.</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># get mean estimates from the classic model</span></span>
<span><span class='va'>m</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>wage</span> <span class='op'>~</span> <span class='va'>education</span>, <span class='va'>salary</span><span class='op'>)</span>  <span class='co'># just a reminder</span></span>
<span><span class='va'>par_avg_preds</span> <span class='op'>&lt;-</span> <span class='fu'>ggeffects</span><span class='fu'>::</span><span class='fu'><a href='https://strengejacke.github.io/ggeffects/reference/ggpredict.html'>ggeffect</a></span><span class='op'>(</span><span class='va'>m</span>, terms <span class='op'>=</span> <span class='st'>"education"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'><a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'>mutate</span><span class='op'>(</span>model <span class='op'>=</span> <span class='st'>"linear"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'>select</span><span class='op'>(</span><span class='va'>model</span>, education <span class='op'>=</span> <span class='va'>x</span>, <span class='va'>predicted</span>, <span class='va'>conf.low</span>, <span class='va'>conf.high</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>par_avg_preds</span></span></code></pre>
</div>
<pre><code># A tibble: 5 × 5
  model  education          predicted conf.low conf.high
  &lt;chr&gt;  &lt;fct&gt;                  &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
1 linear 1. &lt; HS Grad            91.6     62.2      121.
2 linear 2. HS Grad              94.5     79.8      109.
3 linear 3. Some College        106.      89.8      123.
4 linear 4. College Grad        135.     117.       152.
5 linear 5. Advanced Degree     153.     130.       176.</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># combine two datasets</span></span>
<span><span class='va'>preds</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>rbind</a></span><span class='op'>(</span><span class='va'>nonpar_med_boot_preds</span>, <span class='va'>par_avg_preds</span><span class='op'>)</span></span>
<span></span>
<span><span class='co'># plot row data and predicted CIs from both models</span></span>
<span><span class='fu'>ggplot</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'>geom_jitter</span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>salary</span>, <span class='fu'>aes</span><span class='op'>(</span><span class='va'>education</span>, <span class='va'>wage</span><span class='op'>)</span>, </span>
<span>              width <span class='op'>=</span> <span class='fl'>.2</span>, alpha <span class='op'>=</span> <span class='fl'>0.2</span>, size <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span><span class='op'>+</span></span>
<span>  <span class='fu'>geom_pointrange</span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>preds</span>, <span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>education</span>, y <span class='op'>=</span> <span class='va'>predicted</span>, </span>
<span>                  ymin <span class='op'>=</span> <span class='va'>conf.low</span>, ymax <span class='op'>=</span> <span class='va'>conf.high</span>, color <span class='op'>=</span> <span class='va'>model</span><span class='op'>)</span>,</span>
<span>                  position<span class='op'>=</span><span class='fu'>position_dodge</span><span class='op'>(</span>width<span class='op'>=</span><span class='fl'>.6</span><span class='op'>)</span>, size <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="bootstrappingregressions_files/figure-html5/unnamed-chunk-13-1.png" width="624" /></p>
</div>
<!-- Interestingly, the center of the bootstrap distribution is identical to the mean of the sample, because the bootstrap distributions are centered around statistics calculated from the data (e.g., a regression slope). However,  -->
<p>Interestingly, the bootstrapped confidence intervals are slimmer where the variance is low and wider, where the variance is high. So, as mentioned in the beginning, <strong>bootstrapped models describe the variation in the data better and produce therefore more accurate and realistic inferences without violating any assumptions, especially for small samples.</strong></p>
<h1 id="bootstrapping-numeric-predictors">Bootstrapping numeric predictors</h1>
<p>Bootstrapping with numeric predictors works in the same way, so, let’s summarise all we have learned so far, namely:</p>
<ul>
<li>we first create 1000 resamples of our data,</li>
<li>then <code>map()</code> over it to fit new 1000 models, with the numeric predictor “age”</li>
<li>we then <code>map()</code> over every model and use <code>augment()</code> function to extract fitted data for every model in an new nested column, with 100 fitted values for every model, because every resample in boot_data has 100 observations.</li>
<li>1000 models with 100 fitted values each result in 100.000 fitted values, which we see when we unnest them for plotting, and visualize as 1000 lines on the plot</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># produce 1000 resamples</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>123</span><span class='op'>)</span></span>
<span><span class='va'>boot_data</span> <span class='op'>&lt;-</span> <span class='fu'>bootstraps</span><span class='op'>(</span><span class='va'>salary</span>, times <span class='op'>=</span> <span class='fl'>1000</span><span class='op'>)</span> </span>
<span></span>
<span><span class='co'># bootstrap new regressions and unnest all fits</span></span>
<span><span class='va'>boot_models</span> <span class='op'>&lt;-</span> <span class='va'>boot_data</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'>mutate</span><span class='op'>(</span>model     <span class='op'>=</span> <span class='fu'>map</span><span class='op'>(</span><span class='va'>splits</span>, <span class='op'>~</span><span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>wage</span> <span class='op'>~</span> <span class='va'>age</span>, data <span class='op'>=</span> <span class='va'>.</span><span class='op'>)</span><span class='op'>)</span>, </span>
<span>         augmented <span class='op'>=</span> <span class='fu'>map</span><span class='op'>(</span><span class='va'>model</span>, <span class='va'>augment</span><span class='op'>)</span> <span class='op'>)</span></span>
<span></span>
<span><span class='va'>boot_models</span></span></code></pre>
</div>
<pre><code># Bootstrap sampling 
# A tibble: 1,000 × 4
   splits           id            model  augmented         
   &lt;list&gt;           &lt;chr&gt;         &lt;list&gt; &lt;list&gt;            
 1 &lt;split [100/41]&gt; Bootstrap0001 &lt;lm&gt;   &lt;tibble [100 × 9]&gt;
 2 &lt;split [100/38]&gt; Bootstrap0002 &lt;lm&gt;   &lt;tibble [100 × 9]&gt;
 3 &lt;split [100/42]&gt; Bootstrap0003 &lt;lm&gt;   &lt;tibble [100 × 9]&gt;
 4 &lt;split [100/40]&gt; Bootstrap0004 &lt;lm&gt;   &lt;tibble [100 × 9]&gt;
 5 &lt;split [100/30]&gt; Bootstrap0005 &lt;lm&gt;   &lt;tibble [100 × 9]&gt;
 6 &lt;split [100/30]&gt; Bootstrap0006 &lt;lm&gt;   &lt;tibble [100 × 9]&gt;
 7 &lt;split [100/36]&gt; Bootstrap0007 &lt;lm&gt;   &lt;tibble [100 × 9]&gt;
 8 &lt;split [100/35]&gt; Bootstrap0008 &lt;lm&gt;   &lt;tibble [100 × 9]&gt;
 9 &lt;split [100/32]&gt; Bootstrap0009 &lt;lm&gt;   &lt;tibble [100 × 9]&gt;
10 &lt;split [100/36]&gt; Bootstrap0010 &lt;lm&gt;   &lt;tibble [100 × 9]&gt;
# … with 990 more rows</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>boot_aug</span> <span class='op'>&lt;-</span> <span class='va'>boot_models</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'>unnest</span><span class='op'>(</span><span class='va'>augmented</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'>select</span><span class='op'>(</span><span class='op'>-</span><span class='va'>splits</span>, <span class='op'>-</span><span class='va'>model</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>boot_aug</span></span></code></pre>
</div>
<pre><code># A tibble: 100,000 × 10
   id         .rown…¹  wage   age .fitted .resid   .hat .sigma .cooksd
   &lt;chr&gt;      &lt;chr&gt;   &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
 1 Bootstrap… 31       61.2    25    95.7 -34.5  0.0256   47.7 7.09e-3
 2 Bootstrap… 79      112.     48   126.  -14.6  0.0149   47.8 7.20e-4
 3 Bootstrap… 51      110.     40   116.   -5.83 0.0100   47.8 7.66e-5
 4 Bootstrap… 14       79.9    52   132.  -51.8  0.0207   47.5 1.28e-2
 5 Bootstrap… 67       82.7    40   116.  -33.0  0.0100   47.7 2.45e-3
 6 Bootstrap… 42       95.2    30   102.   -7.12 0.0168   47.8 1.95e-4
 7 Bootstrap… 50       99.7    25    95.7   3.99 0.0256   47.8 9.47e-5
 8 Bootstrap… 43       70.5    24    94.4 -23.9  0.0278   47.8 3.70e-3
 9 Bootstrap… 14.1     79.9    52   132.  -51.8  0.0207   47.5 1.28e-2
10 Bootstrap… 25      121.     47   125.   -3.55 0.0138   47.8 3.94e-5
# … with 99,990 more rows, 1 more variable: .std.resid &lt;dbl&gt;, and
#   abbreviated variable name ¹​.rownames</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'>ggplot</span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>boot_aug</span>, <span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>age</span>, y <span class='op'>=</span> <span class='va'>wage</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'>geom_line</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>y <span class='op'>=</span> <span class='va'>.fitted</span>, group <span class='op'>=</span> <span class='va'>id</span><span class='op'>)</span>, col <span class='op'>=</span> <span class='st'>"grey"</span>,  size <span class='op'>=</span> <span class='fl'>0.25</span><span class='op'>)</span> </span></code></pre>
</div>
<p><img src="bootstrappingregressions_files/figure-html5/unnamed-chunk-14-1.png" width="624" /></p>
</div>
<ul>
<li>we then create <strong>new age</strong> data (picture of new age movement) … ups, sorry, not that
<strong>new age</strong>, just data of age from 20 to 75 years old, and call them new in order to evaluate our predictions</li>
<li>use <code>map()</code> function to predict salaries for the new age data by every model</li>
<li>then summarize all 1000 predictions by the median and calculate 95 and 50% confidence intervals (CIs),</li>
<li>and finally plot them on top our our 1000 fitted models</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># get new data for predictions</span></span>
<span><span class='va'>new</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>age <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span><span class='op'>(</span><span class='fl'>20</span>, by <span class='op'>=</span> <span class='fl'>3</span>, <span class='fl'>75</span><span class='op'>)</span><span class='op'>)</span></span>
<span><span class='va'>new</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://rdrr.io/r/base/t.html'>t</a></span><span class='op'>(</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>    [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12]
age   20   23   26   29   32   35   38   41   44    47    50    53
    [,13] [,14] [,15] [,16] [,17] [,18] [,19]
age    56    59    62    65    68    71    74</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>few_preds</span> <span class='op'>&lt;-</span> <span class='va'>boot_models</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'>mutate</span><span class='op'>(</span>few_preds <span class='op'>=</span> <span class='fu'>map</span><span class='op'>(</span><span class='va'>model</span>, <span class='va'>predict</span>, <span class='va'>new</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'>unnest</span><span class='op'>(</span><span class='va'>few_preds</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'>select</span><span class='op'>(</span><span class='op'>-</span><span class='va'>splits</span>, <span class='op'>-</span><span class='va'>model</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'>mutate</span><span class='op'>(</span>age <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span><span class='op'>(</span> <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span><span class='op'>(</span><span class='fl'>20</span>, by <span class='op'>=</span> <span class='fl'>3</span>, <span class='fl'>75</span><span class='op'>)</span> , <span class='fl'>1000</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'>group_by</span><span class='op'>(</span><span class='va'>age</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'>summarise</span><span class='op'>(</span>wage   <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/median.html'>median</a></span><span class='op'>(</span><span class='va'>few_preds</span><span class='op'>)</span>,</span>
<span>            LCL_50 <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/quantile.html'>quantile</a></span><span class='op'>(</span><span class='va'>few_preds</span>, <span class='fl'>0.25</span><span class='op'>)</span>,</span>
<span>            UCL_50 <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/quantile.html'>quantile</a></span><span class='op'>(</span><span class='va'>few_preds</span>, <span class='fl'>0.775</span><span class='op'>)</span>,</span>
<span>            LCL    <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/quantile.html'>quantile</a></span><span class='op'>(</span><span class='va'>few_preds</span>, <span class='fl'>0.025</span><span class='op'>)</span>,</span>
<span>            UCL    <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/quantile.html'>quantile</a></span><span class='op'>(</span><span class='va'>few_preds</span>, <span class='fl'>0.975</span><span class='op'>)</span>,</span>
<span>  <span class='op'>)</span></span>
<span></span>
<span><span class='va'>few_preds</span></span></code></pre>
</div>
<pre><code># A tibble: 19 × 6
     age  wage LCL_50 UCL_50   LCL   UCL
   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1    20  93.4   89.9   97.5  83.4  104.
 2    23  96.2   93.3   99.8  87.9  106.
 3    26  99.1   96.6  102.   91.7  107.
 4    29 102.    99.8  105.   95.5  109.
 5    32 105.   103.   108.   98.8  112.
 6    35 108.   106.   111.  101.   115.
 7    38 111.   108.   114.  104.   119.
 8    41 114.   110.   117.  106.   123.
 9    44 117.   113.   121.  107.   128.
10    47 120.   115.   124.  109.   132.
11    50 122.   118.   128.  110.   137.
12    53 125.   120.   131.  112.   142.
13    56 128.   122.   134.  113.   147.
14    59 131.   125.   138.  114.   152.
15    62 134.   127.   142.  115.   156.
16    65 137.   129.   145.  117.   161.
17    68 139.   131.   149.  118.   166.
18    71 142.   134.   153.  119.   171.
19    74 145.   136.   157.  121.   176.</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'>ggplot</span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>boot_aug</span>, <span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>age</span>, y <span class='op'>=</span> <span class='va'>wage</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'>geom_line</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>y <span class='op'>=</span> <span class='va'>.fitted</span>, group <span class='op'>=</span> <span class='va'>id</span><span class='op'>)</span>, col <span class='op'>=</span> <span class='st'>"grey"</span>,  size <span class='op'>=</span> <span class='fl'>0.25</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'>geom_point</span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>few_preds</span>, <span class='fu'>aes</span><span class='op'>(</span><span class='va'>age</span>, <span class='va'>wage</span><span class='op'>)</span><span class='op'>)</span><span class='op'>+</span></span>
<span>  <span class='fu'>geom_errorbar</span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>few_preds</span>, <span class='fu'>aes</span><span class='op'>(</span>ymin <span class='op'>=</span> <span class='va'>LCL</span>, ymax <span class='op'>=</span> <span class='va'>UCL</span><span class='op'>)</span>, width <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span><span class='op'>+</span></span>
<span>  <span class='fu'>geom_errorbar</span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>few_preds</span>, <span class='fu'>aes</span><span class='op'>(</span>ymin <span class='op'>=</span> <span class='va'>LCL_50</span>, ymax <span class='op'>=</span> <span class='va'>UCL_50</span><span class='op'>)</span><span class='op'>)</span></span></code></pre>
</div>
<p><img src="bootstrappingregressions_files/figure-html5/unnamed-chunk-15-1.png" width="624" /></p>
</div>
<ul>
<li>then we’ll plot the original 100 data points in green and</li>
<li>the results of an ordinary linear regression in blue with their 95% CIs in red</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'>ggplot</span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>boot_aug</span>, <span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>age</span>, y <span class='op'>=</span> <span class='va'>wage</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'>geom_point</span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>salary</span>, <span class='fu'>aes</span><span class='op'>(</span><span class='va'>age</span>, <span class='va'>wage</span><span class='op'>)</span>, colour <span class='op'>=</span> <span class='st'>"green"</span>, shape <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'>geom_line</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>y <span class='op'>=</span> <span class='va'>.fitted</span>, group <span class='op'>=</span> <span class='va'>id</span><span class='op'>)</span>, col <span class='op'>=</span> <span class='st'>"grey"</span>,  size <span class='op'>=</span> <span class='fl'>0.25</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'>geom_point</span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>few_preds</span>, <span class='fu'>aes</span><span class='op'>(</span><span class='va'>age</span>, <span class='va'>wage</span><span class='op'>)</span><span class='op'>)</span><span class='op'>+</span></span>
<span>  <span class='fu'>geom_errorbar</span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>few_preds</span>, <span class='fu'>aes</span><span class='op'>(</span>ymin <span class='op'>=</span> <span class='va'>LCL</span>, ymax <span class='op'>=</span> <span class='va'>UCL</span><span class='op'>)</span>, width <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span><span class='op'>+</span></span>
<span>  <span class='fu'>geom_errorbar</span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>few_preds</span>, <span class='fu'>aes</span><span class='op'>(</span>ymin <span class='op'>=</span> <span class='va'>LCL_50</span>, ymax <span class='op'>=</span> <span class='va'>UCL_50</span><span class='op'>)</span><span class='op'>)</span><span class='op'>+</span></span>
<span>  <span class='fu'>geom_smooth</span><span class='op'>(</span><span class='fu'>aes</span><span class='op'>(</span>x <span class='op'>=</span> <span class='va'>age</span>, y <span class='op'>=</span> <span class='va'>wage</span><span class='op'>)</span>, data <span class='op'>=</span> <span class='va'>salary</span>, method <span class='op'>=</span> <span class='st'>"lm"</span>,</span>
<span>              colour <span class='op'>=</span> <span class='st'>"blue"</span>, fill <span class='op'>=</span> <span class='st'>"red"</span>, alpha <span class='op'>=</span> <span class='fl'>0.25</span><span class='op'>)</span></span></code></pre>
</div>
<img src="bootstrappingregressions_files/figure-html5/unnamed-chunk-16-1.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'>ggsave</span><span class='op'>(</span><span class='st'>"num_example.jpeg"</span>, plot <span class='op'>=</span> <span class='fu'>last_plot</span><span class='op'>(</span><span class='op'>)</span>, width <span class='op'>=</span> <span class='fl'>7</span>, height <span class='op'>=</span> <span class='fl'>4</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<p>And as we can see again,</p>
<ul>
<li>low variance in salaries in the beginning of professional life is described with narrower CIs by the bootstrapped predictions as compared to the ordinary linear regression, while</li>
<li>larger variance in salaries after age of 45 is described by the bootstrapped predictions with wider CIs as compared to the ordinary linear regression</li>
</ul>
<p>Thus, similarly to the categorical predictor, we see that <strong>bootstrapped results better describe the variation in the data and produce therefore more accurate and realistic inferences.</strong></p>
<h1 id="problems">Problems</h1>
<p>So, is bootstrap method perfect? Of coarse no! While bootstrap more accurately describes the variance of a sample, for example here I really want to include high salaries into my variance, to see what is actually possible to earn with this education, if you have real outliers or very influential observations in your data, they will be given more weight then needed. In this case you would use a <strong>robust regression</strong>, and if you wanna become a more complete data scientist in the next five minutes, watch <a href="https://youtu.be/M_7MOkAm9WU">this video</a>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://robustbase.R-forge.R-project.org/'>robustbase</a></span><span class='op'>)</span></span>
<span><span class='va'>rm</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/robustbase/man/lmrob.html'>lmrob</a></span><span class='op'>(</span><span class='va'>wage</span> <span class='op'>~</span> <span class='va'>education</span>, <span class='va'>salary</span><span class='op'>)</span></span>
<span><span class='va'>rob_avg_preds</span> <span class='op'>&lt;-</span> <span class='fu'>ggeffects</span><span class='fu'>::</span><span class='fu'><a href='https://strengejacke.github.io/ggeffects/reference/ggpredict.html'>ggeffect</a></span><span class='op'>(</span><span class='va'>rm</span>, terms <span class='op'>=</span> <span class='st'>"education"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'><a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'>mutate</span><span class='op'>(</span>model <span class='op'>=</span> <span class='st'>"robust"</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'>select</span><span class='op'>(</span><span class='va'>model</span>, education <span class='op'>=</span> <span class='va'>x</span>, <span class='va'>predicted</span>, <span class='va'>conf.low</span>, <span class='va'>conf.high</span><span class='op'>)</span></span>
<span></span>
<span><span class='co'># combine two datasets</span></span>
<span><span class='va'>preds</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>rbind</a></span><span class='op'>(</span><span class='va'>nonpar_med_boot_preds</span>, <span class='va'>par_avg_preds</span>, <span class='va'>rob_avg_preds</span><span class='op'>)</span></span>
<span></span>
<span><span class='fu'>ggplot</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span></span>
<span>  <span class='fu'>geom_jitter</span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>salary</span>, <span class='fu'>aes</span><span class='op'>(</span><span class='va'>education</span>, <span class='va'>wage</span><span class='op'>)</span>, width <span class='op'>=</span> <span class='fl'>.2</span>, alpha <span class='op'>=</span> <span class='fl'>0.2</span>, size <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span><span class='op'>+</span></span>
<span>  <span class='fu'>geom_pointrange</span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>preds</span>, <span class='fu'>aes</span><span class='op'>(</span>x<span class='op'>=</span><span class='va'>education</span>, y<span class='op'>=</span><span class='va'>predicted</span>, </span>
<span>                                    ymin<span class='op'>=</span><span class='va'>conf.low</span>, ymax<span class='op'>=</span><span class='va'>conf.high</span>, color <span class='op'>=</span> <span class='va'>model</span><span class='op'>)</span>,  </span>
<span>                  position<span class='op'>=</span><span class='fu'>position_dodge</span><span class='op'>(</span>width<span class='op'>=</span><span class='fl'>.6</span><span class='op'>)</span>, size <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span></span></code></pre>
</div>
<img src="bootstrappingregressions_files/figure-html5/unnamed-chunk-17-1.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'>ggsave</span><span class='op'>(</span><span class='st'>"rob_example.jpeg"</span>, plot <span class='op'>=</span> <span class='fu'>last_plot</span><span class='op'>(</span><span class='op'>)</span>, width <span class='op'>=</span> <span class='fl'>7</span>, height <span class='op'>=</span> <span class='fl'>4</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<h1 id="further-readings-and-references">Further readings and references</h1>
<ul>
<li><p><a href="https://www.datawim.com/post/bootstrapping-regression-coefficients-in-r/" class="uri">https://www.datawim.com/post/bootstrapping-regression-coefficients-in-r/</a></p></li>
<li><p><a href="https://padpadpadpad.github.io/post/bootstrapping-non-linear-regressions-with-purrr/" class="uri">https://padpadpadpad.github.io/post/bootstrapping-non-linear-regressions-with-purrr/</a></p></li>
</ul>
<hr />
<p>If you think, I missed something, please comment on it, and I’ll improve this tutorial.</p>
<p><strong>Thank you for learning!</strong></p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<section class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr />
<ol>
<li id="fn1" role="doc-endnote"><p>Tim Hesterberg (2015), What Teachers Should Know about the Bootstrap: Resampling in the Undergraduate Statistics Curriculum, The American Statistician 69(4) 371-386, DOI: 10.1080/00031305.2015.1089789<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom">
<h3 id="references">References</h3>
<div id="references-listing"></div>
</div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
